<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ajax登录页面</title>
    <script src="/static/js/jquery-1.12.4.min.js"></script>
    <script>
        $(function () {
            // 绑定btnLogin的click事件
            $('#btnLogin').click(function () {
                // 1. 获取用户名和密码
                username = $('#username').val();
                password = $('#password').val();
                // alert(username+':'+password);
                // 2. 发起一个ajax请求
                alert('发起ajax请求之前');
                /*
                $.ajax({
                    'url': '/login_ajax_check/?username='+username+'&password='+password,
                    'async': false, // 同步ajax请求
                }).success(function (data) {
                    // 获取数据，进行操作
                    // alert(data.res);
                    alert('执行success回调函数');
                    if (data.res === 1){
                        // 登录成功，访问首页
                        location.href = '/index';
                    }else {
                        // 登录失败
                        $('#msg').show().html('用户名或密码错误');
                    }
                });*/
                $.get('/login_ajax_check/?username=' + username + '&password=' + password, function (data) {
                    if (data.res === 1) {
                        // 登录成功，访问首页
                        location.href = '/index';
                    } else {
                        // 登录失败
                        $('#msg').show().html('用户名或密码错误');
                    }
                });
                alert('发起ajax请求之后');
            })
        })
    </script>
    <style>
        #msg {
            display: none;
            color: red;
        }
    </style>
</head>
<body>
用户名: <input type="text" id="username"/><br>
密码: <input type="password" id="password"/><br>
<input type="button" id="btnLogin" value="登录">
<div id="msg"></div>
</body>
</html>